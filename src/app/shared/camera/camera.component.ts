import { Component, OnInit, ViewEncapsulation, Input } from '@angular/core';
import { Camera, CameraOptions } from '@ionic-native/camera/ngx';
import { ModalController } from '@ionic/angular';

@Component({
  selector: 'app-camera',
  templateUrl: './camera.component.html',
  styleUrls: ['./camera.component.scss'],
  encapsulation: ViewEncapsulation.Emulated
})
export class CameraComponent implements OnInit {

  options: CameraOptions;
  @Input('image') image: string;
  photo: string = 'false';

  constructor(
    private camera: Camera,
    private modal: ModalController
  ) {
    this.options = {
      quality: 50,
      destinationType: this.camera.DestinationType.FILE_URI,
      encodingType: this.camera.EncodingType.JPEG,
      mediaType: this.camera.MediaType.PICTURE,
      correctOrientation: true,
      sourceType: this.camera.PictureSourceType.CAMERA
    };
  }

  ngOnInit() {
  }

  public takePicture = () => {
    const options: CameraOptions = {
      quality: 100,
      destinationType: this.camera.DestinationType.FILE_URI,
      encodingType: this.camera.EncodingType.JPEG,
      mediaType: this.camera.MediaType.PICTURE
    }

    this.image = 'data:image/jpeg;base64,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l3Cnla/qyQbHwjvs80ld6bMroHcuzrcnW7VHY8dN/ha1uEga7Vq2sWQjLlsaOHtlJuV8ThfW3XJxyJx71qbh8t0ZbZVC3BB4gadFtAOETAhuI5K7UzEK1RgCQrDEABh0NYvp5pQeSu1eur/eR7869Egcg/BXavXV/vI9+enkltQjUv6cQD/5zr0QOK1+QGPfxqYbz1UP3mWD4OMb8wn16fvTuMQOIr4Osd80gP8AWJ7ZlU+RO00FluPo18v3NOyRA47+CO1R0v8A3n/9x+CO1eup/eR787FEDjn4K7WHzv8AeV/xJseT/JfaQro1apUpIjK5LVecD5WF0yrUPEX1Ok6lEBERAREQEREDnG1PBrzj1KiYjfd3cKyWXM7FrFgSQLnjY+aa3CeCqsynnsRTQ30FNGqgjrJYpY9lj551mJNxyhvBG3RjF/sD/iS03giqfpaf2Lf4k65EXHANpeDXaKOy0qS1VB3XWpTQMOvK7AqezXzmZ2x/BbjKqFq5XDsGsqMVqlhYHNdGIGpItx0ncYi45CvgkrD/AImn/Zt70ur4J6o/4qn/AGbe9OsxFxyHF+C/EIjNTrU6jjxUKsmbUX3ySBpfomNsvkRtBHs9FFViAzc6hCi+rWGpsOgTs8RcQAcgqnz6/UPvSQcmdgtgw4Zw+cqdFK2y5usm/Ed038SLhERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQERED/2Q=='

    this.camera.getPicture(options).then((imageData) => {
      this.image = 'data:image/jpeg;base64,' + imageData;
    }, (err) => {
      // Handle error
      console.log(err)
    });
  }

  close = () => this.modal.dismiss({ 'dismissed': true })
  savePicture = () => 
    this.modal.dismiss({ result: this.image });
}
